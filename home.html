<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TrustVest - Home</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { margin: 0; font-family: 'Poppins', sans-serif; background: #000; color: #fff; overflow-x: hidden; }
    .container { padding: 20px; max-width: 500px; margin: auto; display: flex; flex-direction: column; align-items: center; }
    .logo { width: 100px; margin-top: 20px; }
    h2 { margin: 20px 0; color: #00bfa6; }
    .balance-card {
      background: linear-gradient(135deg, #00bfa6, #00d1b2);
      width: 100%;
      border-radius: 20px;
      padding: 20px;
      color: #000;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-bottom: 30px;
    }
    .balance-card h3 { margin: 0; font-size: 18px; }
    .balance-amount { font-size: 28px; font-weight: bold; margin: 10px 0; }
    .refresh-icon {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255,255,255,0.2);
      padding: 8px;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .refresh-icon:hover { transform: rotate(90deg); }
    .nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #fff;
      font-size: 12px;
    }
    .nav-item svg { margin-bottom: 5px; fill: #00bfa6; width: 24px; height: 24px; }
    #spinner-screen {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.7); backdrop-filter: blur(10px);
      display: flex; justify-content: center; align-items: center; flex-direction: column;
      z-index: 9999; display: none;
    }
    .spinner {
      border: 6px solid rgba(255,255,255,0.2);
      border-top: 6px solid #00bfa6;
      border-radius: 50%;
      width: 50px; height: 50px;
      animation: spin 1s linear infinite;
    }
    .spinner-text { margin-top: 10px; }
    @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
  </style>
</head>
<body>
<div class="container">
  <img src="https://raw.githubusercontent.com/Edunetx/Trustvest/main/Teal%20and%20White%20Modern%20Geometric%20Financial%20Service%20Business%20Logo_20250728_134253_0000.png" alt="TrustVest Logo" class="logo">
  <h2>Welcome to TrustVest</h2>

  <div class="balance-card">
    <h3>Account Balance</h3>
    <div class="balance-amount" id="balanceAmount">₦0.00</div>
    <div class="refresh-icon" id="refreshBalance">
      <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" viewBox="0 0 24 24"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.3-.41 2.5-1.11 3.47l1.46 1.46C19.07 15.57 20 13.88 20 12c0-4.42-3.58-8-8-8zm-6.88 2.53L3.66 7.94C2.93 9.04 2.5 10.47 2.5 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3c-3.31 0-6-2.69-6-6 0-1.3.41-2.5 1.12-3.47z"/></svg>
    </div>
  </div>

  <div id="spinner-screen">
    <div class="spinner"></div>
    <div class="spinner-text" id="spinner-text">Loading...</div>
  </div>
</div>

<div class="nav">
  <div class="nav-item">
    <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    Home
  </div>
  <div class="nav-item">
    <svg viewBox="0 0 24 24"><path d="M12 7a5 5 0 100 10 5 5 0 000-10zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
    Plans
  </div>
  <div class="nav-item">
    <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5C17 14.17 12.33 13 10 13zm8 0c-.29 0-.62.02-.97.05C17.13 14.17 20 15.17 20 16.5V19h3v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
    Teams
  </div>
  <div class="nav-item">
    <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
    Me
  </div>
</div>

<!-- Firebase & Logic -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyArPe6RM7qbUC49XvbDZWvcpr_iGoIRzrA",
    authDomain: "trustvest-a1bd9.firebaseapp.com",
    projectId: "trustvest-a1bd9",
    storageBucket: "trustvest-a1bd9.appspot.com",
    messagingSenderId: "676220073092",
    appId: "1:676220073092:web:b358f8821ac33da9babed1"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  auth.onAuthStateChanged(user => {
    if (!user) {
      window.location.href = "login.html";
    } else {
      loadBalance(user.uid);
    }
  });

  function loadBalance(uid) {
    document.getElementById('spinner-screen').style.display = 'flex';
    db.collection("users").doc(uid).get().then(doc => {
      if (doc.exists) {
        const balance = doc.data().balance || 0;
        animateBalance(balance);
      }
      document.getElementById('spinner-screen').style.display = 'none';
    }).catch(() => {
      document.getElementById('spinner-screen').style.display = 'none';
    });
  }

  function animateBalance(target) {
    let current = 0;
    const element = document.getElementById('balanceAmount');
    const interval = setInterval(() => {
      current += Math.ceil((target - current) / 10);
      element.textContent = `₦${current.toLocaleString()}.00`;
      if (current >= target) clearInterval(interval);
    }, 50);
  }

  document.getElementById('refreshBalance').addEventListener('click', () => {
    const user = auth.currentUser;
    if (user) loadBalance(user.uid);
  });
</script>

<!-- Tawk.to AI Support -->
<script type="text/javascript">
var Tawk_API=Tawk_API||{},Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/688fdc6c88d9b3192aa8420e/1j1ova251';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>

</body>
</html>
