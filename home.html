<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TrustVest Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
    body { background: #0d0d0d; color: #fff; overflow-x: hidden; }
    .container { padding: 20px; }

    /* Top Header */
    .top-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; }
    .branding { display: flex; align-items: center; }
    .branding img { width: 40px; height: auto; margin-right: 10px; }
    .branding span { font-weight: 700; font-size: 1.2rem; color: #00f7c2; }

    .header-icons { display: flex; align-items: center; }
    .header-icons i { font-size: 20px; margin-left: 15px; cursor: pointer; }

    /* Balance Card */
    .balance-card {
      background: linear-gradient(135deg, #00f7c2, #045f4c);
      border-radius: 20px;
      padding: 20px;
      color: #000;
      margin-top: 20px;
      box-shadow: 0 4px 15px rgba(0, 247, 194, 0.4);
    }
    .balance-card h3 { font-weight: 600; font-size: 14px; color: #fff; }
    .balance-card .amount { font-size: 1.8rem; font-weight: 700; margin-top: 5px; color: #fff; }

    /* Action Buttons */
    .actions { display: flex; justify-content: space-between; margin: 20px 0; }
    .action-btn {
      flex: 0 0 48%;
      background: #1a1a1a;
      border-radius: 15px;
      padding: 15px 0;
      text-align: center;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
    }
    .action-btn:hover { background: #262626; }

    /* Quick Stats */
    .stats { display: flex; overflow-x: auto; gap: 10px; margin-bottom: 20px; }
    .stat-card {
      min-width: 140px;
      background: #141414;
      border-radius: 15px;
      padding: 15px;
      text-align: center;
      flex-shrink: 0;
    }
    .stat-card h4 { font-size: 14px; margin-bottom: 5px; color: #00f7c2; }
    .stat-card span { font-size: 18px; font-weight: 700; }

    /* Activity Feed */
    .activity-feed {
      background: #141414;
      border-radius: 15px;
      padding: 15px;
      margin-bottom: 80px;
    }
    .activity-item { font-size: 14px; margin-bottom: 10px; color: #ccc; }

    /* Floating Support */
    .support-icon {
      position: fixed;
      bottom: 80px;
      right: 20px;
      background: #00f7c2;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0, 247, 194, 0.4);
    }

    /* Bottom Navbar */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #1a1a1a;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      border-top: 1px solid #333;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #777;
      font-size: 12px;
      transition: color 0.3s;
    }
    .nav-item.active { color: #00f7c2; }

    /* Spinner Screen */
    .spinner-screen {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      display: none;
      z-index: 999;
    }
    .spinner { border: 4px solid #1a1a1a; border-top: 4px solid #00f7c2; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .spinner-text { margin-top: 10px; color: #fff; font-weight: 600; }

  </style>
</head>
<body>

  <div class="top-header">
    <div class="branding">
      <img src="https://raw.githubusercontent.com/Edunetx/Trustvest/main/Teal%20and%20White%20Modern%20Geometric%20Financial%20Service%20Business%20Logo_20250728_134253_0000.png" alt="TrustVest Logo">
      <span>TrustVest</span>
    </div>
    <div class="header-icons">
      <i class="notification-bell">üîî</i>
      <i class="profile-avatar">üë§</i>
    </div>
  </div>

  <div class="container">
    <div class="balance-card">
      <h3>Account Balance</h3>
      <div class="amount" id="user-balance">‚Ç¶0.00</div>
    </div>

    <div class="actions">
      <div class="action-btn" id="withdraw-btn">üè¶ Withdraw</div>
      <div class="action-btn" id="deposit-btn">‚ûï Deposit</div>
    </div>

    <div class="stats">
      <div class="stat-card">
        <h4>Total Referrals</h4>
        <span id="total-referrals">0</span>
      </div>
      <div class="stat-card">
        <h4>Referral Earnings</h4>
        <span id="referral-earnings">‚Ç¶0.00</span>
      </div>
      <div class="stat-card">
        <h4>Daily Income</h4>
        <span id="daily-income">‚Ç¶0.00</span>
      </div>
    </div>

    <div class="activity-feed">
      <div class="activity-item">‚Ä¢ You earned ‚Ç¶500 today.</div>
      <div class="activity-item">‚Ä¢ New referral joined TrustVest.</div>
      <div class="activity-item">‚Ä¢ Withdrawal of ‚Ç¶2,000 processed.</div>
    </div>
  </div>

  <div class="support-icon" id="support-btn">
    üí¨
  </div>

  <div class="bottom-nav">
    <div class="nav-item active" id="nav-home">üè†<span>Home</span></div>
    <div class="nav-item" id="nav-plans">üìà<span>Plans</span></div>
    <div class="nav-item" id="nav-teams">üë•<span>Teams</span></div>
    <div class="nav-item" id="nav-me">üôã<span>Me</span></div>
  </div>

  <div class="spinner-screen" id="spinner-screen">
    <div class="spinner"></div>
    <div class="spinner-text" id="spinner-text">Loading...</div>
  </div>

<!-- CHUNK 2 (Firebase Logic) will be pasted below this -->
  <!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<script>
  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyArPe6RM7qbUC49XvbDZWvcpr_iGoIRzrA",
    authDomain: "trustvest-a1bd9.firebaseapp.com",
    databaseURL: "https://trustvest-a1bd9-default-rtdb.firebaseio.com",
    projectId: "trustvest-a1bd9",
    storageBucket: "trustvest-a1bd9.appspot.com",
    messagingSenderId: "676220073092",
    appId: "1:676220073092:web:b358f8821ac33da9babed1"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  // Spinner Control
  function showSpinner(message) {
    document.getElementById('spinner-text').innerText = message;
    document.getElementById('spinner-screen').style.display = 'flex';
  }
  function hideSpinner() {
    document.getElementById('spinner-screen').style.display = 'none';
  }

  // Route Guard
  auth.onAuthStateChanged(user => {
    if (!user) {
      window.location.href = '/login';
    } else {
      loadUserData(user.uid);
    }
  });

  // Load User Data
  function loadUserData(uid) {
    showSpinner("Loading...");
    db.collection('users').doc(uid).get().then(doc => {
      if (doc.exists) {
        const data = doc.data();
        document.getElementById('user-balance').innerText = `‚Ç¶${parseFloat(data.balance || 0).toFixed(2)}`;
        document.getElementById('total-referrals').innerText = data.referrals || 0;
        document.getElementById('referral-earnings').innerText = `‚Ç¶${parseFloat(data.referralEarnings || 0).toFixed(2)}`;
        document.getElementById('daily-income').innerText = `‚Ç¶${parseFloat(data.dailyIncome || 0).toFixed(2)}`;
      }
      hideSpinner();
    }).catch(error => {
      console.error(error);
      hideSpinner();
    });
  }

  // Navigation Spinner Simulation
  function navigateTo(page) {
    showSpinner("Please wait...");
    setTimeout(() => {
      window.location.href = `/${page}`;
    }, 1000);
  }

  // NavBar Clicks
  document.getElementById('nav-home').addEventListener('click', () => navigateTo('home'));
  document.getElementById('nav-plans').addEventListener('click', () => navigateTo('plans'));
  document.getElementById('nav-teams').addEventListener('click', () => navigateTo('teams'));
  document.getElementById('nav-me').addEventListener('click', () => navigateTo('me'));

  // Support Button Dummy Action
  document.getElementById('support-btn').addEventListener('click', () => {
    alert('Support Chat Coming Soon...');
  });

  // Withdraw & Deposit Buttons Dummy
  document.getElementById('withdraw-btn').addEventListener('click', () => {
    alert('Withdraw function not yet live.');
  });
  document.getElementById('deposit-btn').addEventListener('click', () => {
    alert('Deposit function not yet live.');
  });
</script>
</body>
</html>
